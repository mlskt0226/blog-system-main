<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 0 16px 40px;
            background: #f5f5f5;
        }
        header {
            text-align: center;
            margin-bottom: 24px;
        }
        nav a {
            color: #0070f3;
            text-decoration: none;
            margin: 0 6px;
        }
        nav a:hover {
            text-decoration: underline;
        }
        h1 {
            margin: 8px 0 16px;
        }
        .post {
            background: #fff;
            padding: 16px 20px;
            margin-bottom: 16px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.06);
        }
        .post-title {
            font-size: 20px;
            margin: 0 0 8px;
        }
        .post-content {
            margin: 0;
            white-space: pre-wrap;
        }
        .favorite-badge {
            background: #ffeb3b;
            color: #333;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            vertical-align: middle;
        }
        .empty {
            text-align: center;
            color: #777;
            margin-top: 40px;
        }
        .comment-list {
            margin: 0 0 8px;
            padding-left: 18px;
        }
        .comment-form input[type="text"] {
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="/">–ì–ª–∞–≤–Ω–∞—è</a> |
            <a href="/favorites">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a> |
            <a href="/profile">–ü—Ä–æ—Ñ–∏–ª—å</a> |
            <a href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a> |
            <a href="/login">–í—Ö–æ–¥</a>
            <a href="/logout">–í—ã—Ö–æ–¥</a> |
            <a href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        </nav>
        <h1>{{ title }}</h1>
    </header>

    {% if posts %}
        {% for post in posts %}
        <div class="post">
            <h2 class="post-title">
                {{ post.title }}
                <span class="favorite-badge">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
            </h2>
            <p class="post-content">{{ post.content }}</p>

            <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É -->
            <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
            {% set comments = comments_by_post.get(post.id, []) %}
            {% if comments %}
                <ul class="comment-list">
                    {% for comment in comments %}
                        <li><strong>{{ comment.author }}:</strong> {{ comment.text }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p style="color:#777;">–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.</p>
            {% endif %}

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
            <form class="comment-form" method="post" action="/posts/{{ post.id }}/comments" style="margin-top:8px;">
                <input type="text" name="author" placeholder="–í–∞—à–µ –∏–º—è" required
                       style="width:30%;padding:4px;">
                <input type="text" name="text" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" required
                       style="width:55%;padding:4px;">
                <button type="submit" style="padding:4px 8px;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>

            <!-- –£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
            <form method="post" action="/posts/{{ post.id }}/unfavorite" style="margin-top:8px;">
                <button type="submit" style="padding:4px 8px; background:#ff4444; color:white;">–£–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ</button>
            </form>

        </div>
        {% endfor %}
    {% else %}
        <div class="empty">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤.</p>
            <p><a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a> –∏ –¥–æ–±–∞–≤—å—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ üôÇ</p>
        </div>
    {% endif %}
</body>
</html>
